<%- include('partials/header', { title: 'Nossos Eventos' }) %>

    <div class="container">
        <% if (message) { %>
            <div class="flash-message <%= message.type %>">
                <%= message.text %>
            </div>
            <% } %>

                <h1>Pr√≥ximos Eventos</h1>

                <div class="event-list">

                    <% events.forEach(event=> { %>
                        <div class="event-card">
                            <h3>
                                <%= event.title %>
                            </h3>
                            <div class="date">
                                <%= event.date ? new Date(event.date).toLocaleDateString('pt-BR', {timeZone: 'UTC' })
                                    : 'Data a definir' %>
                            </div>
                            <%# ADICIONAR ESTES CAMPOS %>
                                <div class="location-time"
                                    style="color: var(--text-secondary); margin-bottom: 0.75rem;">
                                    <% if (event.location) { %>
                                        <span>üìç <%= event.location %></span>
                                        <% } %>
                                            <% if (event.time) { %>
                                                <span style="margin-left: 10px;">üïí <%= event.time %></span>
                                                <% } %>
                                </div>
                                <p>
                                    <%= event.description || 'Este evento n√£o possui descri√ß√£o.' %>
                                </p>

                                <% if (user) { %>
                                    <% if (user.role==='admin' ) { %>
                                        <div class="event-card-actions">
                                            <a href="/site/eventos/<%= event.id %>/editar" class="btn">Editar</a>
                                            <a href="/site/eventos/<%= event.id %>/excluir"
                                                class="btn btn-danger">Excluir</a>
                                        </div>
                                        <% } else { %>
                                            <form action="/subscribe" method="POST">
                                                <input type="hidden" name="eventId" value="<%= event.id %>">
                                                <input type="hidden" name="userId" value="<%= user.id %>">
                                                <button type="submit" class="btn">Inscrever-se</button>
                                            </form>
                                            <% } %>
                                                <% } else { %>
                                                    <a href="/site/login" class="btn">Login para se inscrever</a>
                                                    <% } %>
                        </div>
                        <% }) %>

                </div>
    </div>

    <%- include('partials/footer') %>