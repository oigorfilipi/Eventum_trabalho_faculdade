<%# Arquivo: src/views/home.ejs A NOVA P√ÅGINA INICIAL COM O CARROSSEL %>

    <%- include('partials/header', { title: 'Home' }) %>

        <%# O container do carrossel substitui o <header class="hero"> %>
            <div class="carousel-container">

                <%# Esta √© a "janela" do carrossel %>
                    <div class="carousel-track" id="carousel-track">

                        <%# Verifica se temos eventos. Se n√£o tiver, mostra um slide padr√£o. %>
                            <% if (carouselEvents && carouselEvents.length> 0) { %>

                                <%# Faz um loop nos 3 eventos mais recentes %>
                                    <% carouselEvents.forEach(event=> { %>
                                        <div class="carousel-slide">

                                            <%# 1. A Imagem (fundo tela cheia) %>
                                                <div class="slide-image">
                                                    <img src="<%= event.cover_image_url %>"
                                                        alt="Capa do evento: <%= event.title %>">
                                                </div>

                                                <%# 2. O Overlay (que agora ser√° um gradiente) %>
                                                    <div class="slide-overlay-gradient"></div>

                                                    <%# 3. O Conte√∫do (que ficar√° na base) %>
                                                        <div class="slide-content-bottom">
                                                            <h1>
                                                                <%= event.title %>
                                                            </h1>

                                                            <%# Limita a descri√ß√£o %>
                                                                <p>
                                                                    <%= event.description.substring(0, 120) %>...
                                                                </p>

                                                                <% if (event.schedule && event.schedule.date_start) { %>
                                                                    <div class="slide-details">
                                                                        üóìÔ∏è <%= new
                                                                            Date(event.schedule.date_start).toLocaleDateString('pt-BR',
                                                                            {timeZone: 'UTC' }) %>
                                                                            <% if (event.schedule.time_start) { %>
                                                                                √†s <%= event.schedule.time_start %>
                                                                                    <% } %>
                                                                    </div>
                                                                    <% } else { %>
                                                                        <div class="slide-details">
                                                                            üóìÔ∏è Data a definir
                                                                        </div>
                                                                        <% } %>

                                                                            <a href="/site/eventos/<%= event.id %>"
                                                                                class="btn-primary-carousel">Saiba
                                                                                Mais</a>
                                                        </div>

                                        </div>
                                        <% }) %>
                                            <% } else { %>
                                                <%# Slide padr√£o se n√£o houver eventos com imagem %>
                                                    <div class="carousel-slide">
                                                        <div class="slide-image">
                                                            <img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?auto=format&fit=crop&q=80&w=1470"
                                                                alt="">
                                                        </div>
                                                        <div class="slide-overlay"></div>
                                                        <div class="slide-content">
                                                            <h1>Bem-vindo ao Eventum</h1>
                                                            <p>Nenhum evento recente com imagem de capa encontrado. Crie
                                                                um novo evento para v√™-lo aqui!</p>
                                                            <% if (user && user.role==='admin' ) { %>
                                                                <a href="/site/eventos/novo"
                                                                    class="btn-primary-carousel">Criar Evento</a>
                                                                <% } %>
                                                        </div>
                                                    </div>
                                                    <% } %>

                    </div>

                    <%# Bot√µes de Navega√ß√£o (s√≥ aparecem se tiver mais de 1 slide) %>
                        <% if (carouselEvents && carouselEvents.length> 1) { %>
                            <button class="carousel-button prev" id="carousel-prev">‚ùÆ</button>
                            <button class="carousel-button next" id="carousel-next">‚ùØ</button>
                            <% } %>
            </div>

            <div class="container">
                <div class="about-section">

                    <div class="about-image">
                        <img src="/img/Logo-Eventum.png" alt="Logo Eventum">
                    </div>

                    <div class="about-text">
                        <h2>O que √© a Eventum?</h2>
                        <p>
                            A Eventum √© uma plataforma moderna desenhada para simplificar o gerenciamento de eventos
                            acad√™micos e corporativos.
                            Nossa miss√£o √© eliminar processos manuais, facilitar inscri√ß√µes e automatizar a organiza√ß√£o.
                        </p>
                        <p>
                            Seja voc√™ um organizador de workshops, palestras ou confer√™ncias, n√≥s fornecemos as
                            ferramentas para
                            voc√™ focar no que realmente importa: criar uma experi√™ncia incr√≠vel.
                        </p>
                    </div>

                </div>
            </div>

            <div class="container">
                <div class="faq-section">
                    <h2>Perguntas Frequentes (FAQ)</h2>

                    <details class="faq-item">
                        <summary>Como fa√ßo para me inscrever em um evento?</summary>
                        <div class="faq-answer">
                            <p>√â simples! Navegue at√© a p√°gina "Eventos", encontre o evento do seu interesse, clique
                                nele para ver os detalhes e, em seguida, clique no bot√£o "Inscrever-se". Se voc√™ n√£o
                                estiver logado, precisar√° fazer login ou se cadastrar.</p>
                        </div>
                    </details>

                    <details class="faq-item">
                        <summary>O evento √© pago? Como funciona?</summary>
                        <div class="faq-answer">
                            <p>Alguns eventos s√£o gratuitos e outros s√£o pagos. Essa informa√ß√£o est√° vis√≠vel na p√°gina
                                de detalhes do evento. Para eventos pagos, voc√™ ser√° redirecionado para uma p√°gina de
                                pagamento (atualmente simulada). Ap√≥s a confirma√ß√£o, sua inscri√ß√£o √© validada.</p>
                        </div>
                    </details>

                    <details class="faq-item">
                        <summary>Como posso ver os eventos em que me inscrevi?</summary>
                        <div class="faq-answer">
                            <p>Todas as suas inscri√ß√µes est√£o dispon√≠veis na sua p√°gina "Minha Conta". L√° voc√™ pode ver
                                uma lista de todos os eventos em que est√° participando.</p>
                        </div>
                    </details>

                </div>
            </div>
            <div class="container">
                <div class="form-container">
                    <h2 style="text-align: center;">Entre em Contato</h2>

                    <form action="/site/contato" method="POST">
                        <div class="form-group">
                            <label for="contact-name">Seu Nome:</label>
                            <input type="text" id="contact-name" name="name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="contact-email">Seu Email:</label>
                            <input type="email" id="contact-email" name="email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="contact-phone">Seu Telefone (Opcional):</label>
                            <input type="tel" id="contact-phone" name="phone" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="contact-message">Sua Mensagem:</label>
                            <textarea id="contact-message" name="message" class="form-control" rows="5"
                                required></textarea>
                        </div>
                        <button type-"submit" class="btn-secondary" disabled>Enviar Mensagem (Em Breve)</button>
                    </form>
                </div>
            </div>


            <%# CSS e JS S√ì PARA O CARROSSEL (colamos aqui para n√£o poluir os arquivos globais) %>
                <style>
                    .carousel-container {
                        /* O container "contido" que voc√™ gostou */
                        max-width: 1100px;
                        margin: 2rem auto;
                        height: 600px;
                        /* A altura maior */
                        position: relative;
                        overflow: hidden;
                        background-color: var(--card-color);
                        border-radius: 10px;
                        border: 1px solid var(--border-color);
                    }

                    .carousel-track {
                        display: flex;
                        height: 100%;
                        overflow-x: auto;
                        scroll-snap-type: x mandatory;
                        scroll-behavior: smooth;
                        -webkit-overflow-scrolling: touch;
                        scrollbar-width: none;
                    }

                    .carousel-track::-webkit-scrollbar {
                        display: none;
                    }

                    .carousel-slide {
                        flex: 0 0 100%;
                        width: 100%;
                        height: 100%;
                        scroll-snap-align: start;
                        position: relative;
                        /* Base para o conte√∫do */
                        overflow: hidden;
                    }

                    /* 1. A Imagem (Fundo total) */
                    .slide-image {
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                    }

                    .slide-image img {
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        /* Zoom sem distorcer */
                    }

                    /* 2. O "FADE" (A opacidade diminu√≠da no fundo) */
                    .slide-overlay-gradient {
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 70%;
                        /* Cobre 70% da altura a partir de baixo */
                        /* O Gradiente: come√ßa transparente em cima e fica escuro embaixo */
                        background: linear-gradient(to top,
                                rgba(0, 0, 0, 0.85) 20%,
                                /* Mais escuro na base */
                                rgba(0, 0, 0, 0) 100%
                                /* Transparente no topo */
                            );
                        z-index: 1;
                    }

                    /* 3. O Conte√∫do (Na base, em cima do fade) */
                    .slide-content-bottom {
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        z-index: 2;
                        /* Fica na frente do gradiente */
                        padding: 2rem 3rem;
                        /* Espa√ßamento do texto */
                        color: #ffffff;
                        text-align: left;
                        /* Alinha o texto √† esquerda */
                    }

                    .slide-content-bottom h1 {
                        color: #ffffff;
                        font-size: 2.5rem;
                    }

                    .slide-content-bottom p {
                        font-size: 1.1rem;
                        margin-bottom: 1rem;
                        color: #E0E0E0;
                        /* Cor de texto mais clara */
                        max-width: 700px;
                        /* Limita a largura do texto */
                    }

                    .slide-details {
                        font-weight: 500;
                        margin-bottom: 1.5rem;
                        color: #E0E0E0;
                    }

                    /* 4. Bot√£o do Carrossel */
                    .btn-primary-carousel {
                        display: inline-block;
                        padding: 0.75rem 1.5rem;
                        background-color: var(--accent-color);
                        color: #ffffff;
                        border: 2px solid var(--accent-color);
                        border-radius: 5px;
                        text-decoration: none;
                        font-weight: 600;
                        transition: all 0.2s ease;
                    }

                    .btn-primary-carousel:hover {
                        background-color: var(--accent-hover);
                        border-color: var(--accent-hover);
                        text-decoration: none;
                    }

                    /* 5. Setas de Navega√ß√£o (permanecem iguais) */
                    .carousel-button {
                        position: absolute;
                        top: 50%;
                        transform: translateY(-50%);
                        z-index: 3;
                        background-color: rgba(0, 0, 0, 0.3);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        color: white;
                        font-size: 2rem;
                        border-radius: 50%;
                        width: 50px;
                        height: 50px;
                        cursor: pointer;
                        transition: background-color 0.2s ease;
                    }

                    .carousel-button:hover {
                        background-color: rgba(0, 0, 0, 0.5);
                    }

                    .carousel-button.prev {
                        left: 20px;
                    }

                    .carousel-button.next {
                        right: 20px;
                    }
                </style>

                <script>
                    // JS para os bot√µes de seta
                    document.addEventListener('DOMContentLoaded', () => {
                        const track = document.getElementById('carousel-track');
                        const prevBtn = document.getElementById('carousel-prev');
                        const nextBtn = document.getElementById('carousel-next');

                        if (track && prevBtn && nextBtn) {
                            const slideWidth = track.querySelector('.carousel-slide').clientWidth;

                            prevBtn.addEventListener('click', () => {
                                track.scrollBy({ left: -slideWidth, behavior: 'smooth' });
                            });
                            nextBtn.addEventListener('click', () => {
                                track.scrollBy({ left: slideWidth, behavior: 'smooth' });
                            });
                        }
                    });
                </script>




                <%- include('partials/footer') %>